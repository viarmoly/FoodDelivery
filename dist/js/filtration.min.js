(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.drawFiltration = drawFiltration;

var _pagination = require("./pagination");

function drawFiltration() {
  var drinks = document.getElementById('drinks');

  if (drinks) {
    var filtration = document.getElementById('filters');
    var catalogFilters = document.createElement('div');
    catalogFilters.className = 'product-filters';
    var productFilter = document.createElement('div');
    productFilter.className = 'product-filter';
    var filterLabel = document.createElement('label');
    filterLabel.setAttribute('for', 'filter');
    filterLabel.innerText = 'Фильтровать: ';
    var filterSelectBlock = document.createElement('select');
    filterSelectBlock.setAttribute('id', 'filter');
    filterSelectBlock.setAttribute('name', 'filterProducts');
    filterSelectBlock.addEventListener('change', makeFiltration);
    var allFilter = document.createElement('option');
    allFilter.setAttribute('value', 'all');
    allFilter.innerText = 'Все';
    filterSelectBlock.appendChild(allFilter);
    var waterFilter = document.createElement('option');
    waterFilter.setAttribute('value', 'water');
    waterFilter.innerText = 'Минеральная вода';
    filterSelectBlock.appendChild(waterFilter);
    var energyFilter = document.createElement('option');
    energyFilter.setAttribute('value', 'energy');
    energyFilter.innerText = 'Енергетики';
    filterSelectBlock.appendChild(energyFilter);
    var sweetFilter = document.createElement('option');
    sweetFilter.setAttribute('value', 'sweet');
    sweetFilter.innerText = 'Газировка вода';
    filterSelectBlock.appendChild(sweetFilter);
    var alcoholFilter = document.createElement('option');
    alcoholFilter.setAttribute('value', 'alcohol');
    alcoholFilter.innerText = 'Алкогольные напитки';
    filterSelectBlock.appendChild(alcoholFilter);
    productFilter.appendChild(filterLabel);
    productFilter.appendChild(filterSelectBlock);
    catalogFilters.appendChild(productFilter);
    filtration.appendChild(catalogFilters);
  }
}

function makeFiltration() {
  var value = document.getElementById('filter').value;
  var list = _pagination.pagination.list;

  if (value === 'all') {
    makeFullFiltration(list);

    _pagination.pagination.load();
  }

  if (value === 'water') {
    makeWaterFiltration(list);

    _pagination.pagination.remove();
  }

  if (value === 'energy') {
    makeEnergyFiltration(list);

    _pagination.pagination.remove();
  }

  if (value === 'sweet') {
    makeSweetFiltration(list);

    _pagination.pagination.remove();
  }

  if (value === 'alcohol') {
    makeAlcoholFiltration(list);

    _pagination.pagination.remove();
  }
}

function makeWaterFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'water') {
      item.style.display = 'none';
    }
  });
}

function makeFullFiltration(list) {
  list.forEach(function (item) {
    item.style.display = 'block';
  });
}

function makeEnergyFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'energy') {
      item.style.display = 'none';
    }
  });
}

function makeSweetFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'sweet') {
      item.style.display = 'none';
    }
  });
}

function makeAlcoholFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'alcohol') {
      item.style.display = 'none';
    }
  });
}

},{"./pagination":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pagination = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

var pagination = {
  list: [],
  pageList: [],
  paginationList: [],
  qtyPagList: [],
  currentPage: 1,
  numberPerPage: 3,
  numberOfPages: 1,
  getScreenWidth: function getScreenWidth() {
    if (window.innerWidth <= 1080) {
      console.log(window.innerWidth);
      this.numberPerPage = 4;
    }
  },
  getNumberOfPages: function getNumberOfPages() {
    return Math.ceil(pagination.list.length / pagination.numberPerPage);
  },
  makeContentList: function makeContentList() {
    var itemsQty = document.getElementById('container');
    var items = itemsQty.children;
    this.list = _toConsumableArray(items);
    return this.list;
  },
  loadContentList: function loadContentList() {
    var begin = (this.currentPage - 1) * this.numberPerPage;
    var end = begin + this.numberPerPage;
    this.pageList = this.list.slice(begin, end);
    pagination.drawList();
  },
  drawList: function drawList() {
    document.getElementById('container').innerHTML = '';
    var container = document.getElementById('container');
    this.pageList.forEach(function (item) {
      container.appendChild(item);
    });
  },
  makePaginationList: function makePaginationList() {
    var pageConatiner = document.createElement('span');

    for (var i = 1; i <= this.numberOfPages; i++) {
      var pageNumber = document.createElement('a');

      if (i === 1) {
        pageNumber.classList.add('current');
      }

      pageNumber.textContent = "".concat(i);
      pageNumber.addEventListener('click', currentPageNumber);
      pageConatiner.appendChild(pageNumber);
    }

    this.paginationList = _toConsumableArray(pageConatiner.children);
    return this.paginationList;
  },
  paginationCut: function paginationCut() {
    if (this.currentPage <= 6) {
      this.qtyPagList = this.paginationList.slice(0, 10);
    } else if (this.currentPage > 6 && this.currentPage < this.paginationList.length - 4) {
      this.qtyPagList = this.paginationList.slice(this.currentPage - 6, this.currentPage + 4);
    } else if (this.currentPage >= this.paginationList.length - 4) {
      this.qtyPagList = this.paginationList.slice(-10);
    }

    pagination.drawPagination();
  },
  drawPagination: function drawPagination() {
    var pagination = document.getElementById('pagination');
    document.getElementById('pagination').innerHTML = '';
    var first = document.createElement('a');
    var firstIcon = document.createElement('i');
    firstIcon.className = 'fas fa-1x fa-angle-double-left';
    first.appendChild(firstIcon);
    first.addEventListener('click', firstPage);
    pagination.appendChild(first);
    var prev = document.createElement('a');
    var prevIcon = document.createElement('i');
    prevIcon.className = 'fas fa-1x fa-angle-left';
    prev.appendChild(prevIcon);
    prev.addEventListener('click', previousPage);
    pagination.appendChild(prev);
    var pageConatiner = document.createElement('span');
    this.qtyPagList.forEach(function (item) {
      pageConatiner.appendChild(item);
    });
    pagination.appendChild(pageConatiner);
    var next = document.createElement('a');
    var nextIcon = document.createElement('i');
    nextIcon.className = 'fas fa-1x fa-angle-right';
    next.appendChild(nextIcon);
    next.addEventListener('click', nextPage);
    pagination.appendChild(next);
    var last = document.createElement('a');
    var lastIcon = document.createElement('i');
    lastIcon.className = 'fas fa-1x fa-angle-double-right';
    last.appendChild(lastIcon);
    last.addEventListener('click', lastPage);
    pagination.appendChild(last);
  },
  toggleClass: function toggleClass() {
    this.paginationList.forEach(function (item) {
      return item.classList.remove('current');
    });
    this.qtyPagList.forEach(function (item) {
      return item.classList.remove('current');
    });

    if (this.currentPage) {
      this.paginationList[this.currentPage - 1].className = "current";
    }
  },
  remove: function remove() {
    var pagination = document.getElementById('pagination');
    document.getElementById('pagination').innerHTML = '';
  },
  loadEvents: function loadEvents() {
    pagination.paginationCut();
    pagination.toggleClass();
    pagination.loadContentList();
  },
  load: function load() {
    pagination.getScreenWidth();
    pagination.makeContentList();
    this.currentPage = 1;
    this.numberOfPages = pagination.getNumberOfPages();
    pagination.makePaginationList();
    pagination.paginationCut();
    pagination.loadContentList();
    pagination.drawList();
  }
};
exports.pagination = pagination;

function currentPageNumber(ev) {
  ev.preventDefault();
  var position = parseInt(ev.target.text);

  if (position !== pagination.currentPage) {
    pagination.currentPage = position;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  }
}

function nextPage(ev) {
  if (pagination.currentPage !== pagination.numberOfPages) {
    pagination.currentPage += 1;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  } else {
    ev.preventDefault();
  }
}

function previousPage(ev) {
  ev.preventDefault();

  if (pagination.currentPage !== 1) {
    pagination.currentPage -= 1;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  } else {
    ev.preventDefault();
  }
}

function firstPage(ev) {
  ev.preventDefault();

  if (pagination.currentPage !== 1) {
    pagination.currentPage = 1;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  }
}

function lastPage(ev) {
  ev.preventDefault();

  if (pagination.currentPage !== pagination.numberOfPages) {
    pagination.currentPage = pagination.numberOfPages;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  }
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZmlsdHJhdGlvbi5qcyIsInNyYy9qcy9wYWdpbmF0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztBQ0FBOztBQUVPLFNBQVMsY0FBVCxHQUEwQjtBQUU3QixNQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixRQUF4QixDQUFiOztBQUNBLE1BQUksTUFBSixFQUFZO0FBQ1IsUUFBSSxVQUFVLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBakI7QUFFQSxRQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUFyQjtBQUNBLElBQUEsY0FBYyxDQUFDLFNBQWYsR0FBMkIsaUJBQTNCO0FBRUEsUUFBSSxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBcEI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxTQUFkLEdBQTBCLGdCQUExQjtBQUVBLFFBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQWxCO0FBQ0EsSUFBQSxXQUFXLENBQUMsWUFBWixDQUF5QixLQUF6QixFQUFnQyxRQUFoQztBQUNBLElBQUEsV0FBVyxDQUFDLFNBQVosR0FBd0IsZUFBeEI7QUFFQSxRQUFJLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQXhCO0FBQ0EsSUFBQSxpQkFBaUIsQ0FBQyxZQUFsQixDQUErQixJQUEvQixFQUFxQyxRQUFyQztBQUNBLElBQUEsaUJBQWlCLENBQUMsWUFBbEIsQ0FBK0IsTUFBL0IsRUFBdUMsZ0JBQXZDO0FBQ0EsSUFBQSxpQkFBaUIsQ0FBQyxnQkFBbEIsQ0FBbUMsUUFBbkMsRUFBNkMsY0FBN0M7QUFFQSxRQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQUFoQjtBQUNBLElBQUEsU0FB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bigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQge3BhZ2luYXRpb259IGZyb20gXCIuL3BhZ2luYXRpb25cIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3RmlsdHJhdGlvbigpIHtcclxuXHJcbiAgICBsZXQgZHJpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RyaW5rcycpO1xyXG4gICAgaWYgKGRyaW5rcykge1xyXG4gICAgICAgIGxldCBmaWx0cmF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlcnMnKTtcclxuXHJcbiAgICAgICAgbGV0IGNhdGFsb2dGaWx0ZXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2F0YWxvZ0ZpbHRlcnMuY2xhc3NOYW1lID0gJ3Byb2R1Y3QtZmlsdGVycyc7XHJcblxyXG4gICAgICAgIGxldCBwcm9kdWN0RmlsdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgcHJvZHVjdEZpbHRlci5jbGFzc05hbWUgPSAncHJvZHVjdC1maWx0ZXInO1xyXG5cclxuICAgICAgICBsZXQgZmlsdGVyTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgIGZpbHRlckxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2ZpbHRlcicpO1xyXG4gICAgICAgIGZpbHRlckxhYmVsLmlubmVyVGV4dCA9ICfQpNC40LvRjNGC0YDQvtCy0LDRgtGMOiAnO1xyXG5cclxuICAgICAgICBsZXQgZmlsdGVyU2VsZWN0QmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2ZpbHRlcicpO1xyXG4gICAgICAgIGZpbHRlclNlbGVjdEJsb2NrLnNldEF0dHJpYnV0ZSgnbmFtZScsICdmaWx0ZXJQcm9kdWN0cycpO1xyXG4gICAgICAgIGZpbHRlclNlbGVjdEJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG1ha2VGaWx0cmF0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGFsbEZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGFsbEZpbHRlci5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ2FsbCcpO1xyXG4gICAgICAgIGFsbEZpbHRlci5pbm5lclRleHQgPSAn0JLRgdC1JztcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5hcHBlbmRDaGlsZChhbGxGaWx0ZXIpO1xyXG5cclxuICAgICAgICBsZXQgd2F0ZXJGaWx0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICB3YXRlckZpbHRlci5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ3dhdGVyJyk7XHJcbiAgICAgICAgd2F0ZXJGaWx0ZXIuaW5uZXJUZXh0ID0gJ9Cc0LjQvdC10YDQsNC70YzQvdCw0Y8g0LLQvtC00LAnO1xyXG4gICAgICAgIGZpbHRlclNlbGVjdEJsb2NrLmFwcGVuZENoaWxkKHdhdGVyRmlsdGVyKTtcclxuXHJcbiAgICAgICAgbGV0IGVuZXJneUZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGVuZXJneUZpbHRlci5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ2VuZXJneScpO1xyXG4gICAgICAgIGVuZXJneUZpbHRlci5pbm5lclRleHQgPSAn0JXQvdC10YDQs9C10YLQuNC60LgnO1xyXG4gICAgICAgIGZpbHRlclNlbGVjdEJsb2NrLmFwcGVuZENoaWxkKGVuZXJneUZpbHRlcik7XHJcblxyXG4gICAgICAgIGxldCBzd2VldEZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIHN3ZWV0RmlsdGVyLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnc3dlZXQnKTtcclxuICAgICAgICBzd2VldEZpbHRlci5pbm5lclRleHQgPSAn0JPQsNC30LjRgNC+0LLQutCwINCy0L7QtNCwJztcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5hcHBlbmRDaGlsZChzd2VldEZpbHRlcik7XHJcblxyXG4gICAgICAgIGxldCBhbGNvaG9sRmlsdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgYWxjb2hvbEZpbHRlci5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ2FsY29ob2wnKTtcclxuICAgICAgICBhbGNvaG9sRmlsdGVyLmlubmVyVGV4dCA9ICfQkNC70LrQvtCz0L7Qu9GM0L3Ri9C1INC90LDQv9C40YLQutC4JztcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5hcHBlbmRDaGlsZChhbGNvaG9sRmlsdGVyKTtcclxuXHJcbiAgICAgICAgcHJvZHVjdEZpbHRlci5hcHBlbmRDaGlsZChmaWx0ZXJMYWJlbCk7XHJcbiAgICAgICAgcHJvZHVjdEZpbHRlci5hcHBlbmRDaGlsZChmaWx0ZXJTZWxlY3RCbG9jayk7XHJcblxyXG4gICAgICAgIGNhdGFsb2dGaWx0ZXJzLmFwcGVuZENoaWxkKHByb2R1Y3RGaWx0ZXIpO1xyXG4gICAgICAgIGZpbHRyYXRpb24uYXBwZW5kQ2hpbGQoY2F0YWxvZ0ZpbHRlcnMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRmlsdHJhdGlvbigpIHtcclxuICAgIGxldCB2YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXInKS52YWx1ZTtcclxuICAgIGxldCBsaXN0ID0gcGFnaW5hdGlvbi5saXN0O1xyXG5cclxuICAgIGlmICh2YWx1ZSA9PT0gJ2FsbCcpIHtcclxuICAgICAgICBtYWtlRnVsbEZpbHRyYXRpb24obGlzdCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5sb2FkKClcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSA9PT0gJ3dhdGVyJykge1xyXG4gICAgICAgIG1ha2VXYXRlckZpbHRyYXRpb24obGlzdCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSA9PT0gJ2VuZXJneScpIHtcclxuICAgICAgICBtYWtlRW5lcmd5RmlsdHJhdGlvbihsaXN0KTtcclxuICAgICAgICBwYWdpbmF0aW9uLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlID09PSAnc3dlZXQnKSB7XHJcbiAgICAgICAgbWFrZVN3ZWV0RmlsdHJhdGlvbihsaXN0KTtcclxuICAgICAgICBwYWdpbmF0aW9uLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlID09PSAnYWxjb2hvbCcpIHtcclxuICAgICAgICBtYWtlQWxjb2hvbEZpbHRyYXRpb24obGlzdCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5yZW1vdmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVdhdGVyRmlsdHJhdGlvbihsaXN0KSB7XHJcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xyXG4gICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICBsZXQgdHlwZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdwcm9kLXR5cGUnKTtcclxuICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGlmICh0eXBlICE9PSAnd2F0ZXInKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUZ1bGxGaWx0cmF0aW9uKGxpc3QpIHtcclxuICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VFbmVyZ3lGaWx0cmF0aW9uKGxpc3QpIHtcclxuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7XHJcbiAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgIGxldCB0eXBlID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ3Byb2QtdHlwZScpO1xyXG4gICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgaWYgKHR5cGUgIT09ICdlbmVyZ3knKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVN3ZWV0RmlsdHJhdGlvbihsaXN0KSB7XHJcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xyXG4gICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICBsZXQgdHlwZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdwcm9kLXR5cGUnKTtcclxuICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGlmICh0eXBlICE9PSAnc3dlZXQnKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUFsY29ob2xGaWx0cmF0aW9uKGxpc3QpIHtcclxuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7XHJcbiAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgIGxldCB0eXBlID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ3Byb2QtdHlwZScpO1xyXG4gICAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgaWYgKHR5cGUgIT09ICdhbGNvaG9sJykge1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iLCJleHBvcnQgY29uc3QgcGFnaW5hdGlvbiA9IHtcclxuICAgIGxpc3Q6IFtdLFxyXG4gICAgcGFnZUxpc3Q6IFtdLFxyXG4gICAgcGFnaW5hdGlvbkxpc3Q6IFtdLFxyXG4gICAgcXR5UGFnTGlzdDogW10sXHJcbiAgICBjdXJyZW50UGFnZTogMSxcclxuICAgIG51bWJlclBlclBhZ2U6IDMsXHJcbiAgICBudW1iZXJPZlBhZ2VzOiAxLFxyXG5cclxuICAgIGdldFNjcmVlbldpZHRoKCl7XHJcbiAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoIDw9IDEwODApe1xyXG4gICAgICAgICAgY29uc29sZS5sb2cod2luZG93LmlubmVyV2lkdGgpO1xyXG4gICAgICAgICAgdGhpcy5udW1iZXJQZXJQYWdlID0gNDtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXROdW1iZXJPZlBhZ2VzKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwocGFnaW5hdGlvbi5saXN0Lmxlbmd0aCAvIHBhZ2luYXRpb24ubnVtYmVyUGVyUGFnZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG1ha2VDb250ZW50TGlzdCgpIHtcclxuICAgICAgICBsZXQgaXRlbXNRdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7XHJcbiAgICAgICAgbGV0IGl0ZW1zID0gaXRlbXNRdHkuY2hpbGRyZW47XHJcbiAgICAgICAgdGhpcy5saXN0ID0gWy4uLml0ZW1zXTtcclxuICAgICAgICByZXR1cm4gdGhpcy5saXN0O1xyXG4gICAgfSxcclxuXHJcbiAgICBsb2FkQ29udGVudExpc3QoKSB7XHJcbiAgICAgICAgbGV0IGJlZ2luID0gKCh0aGlzLmN1cnJlbnRQYWdlIC0gMSkgKiB0aGlzLm51bWJlclBlclBhZ2UpO1xyXG4gICAgICAgIGxldCBlbmQgPSBiZWdpbiArIHRoaXMubnVtYmVyUGVyUGFnZTtcclxuICAgICAgICB0aGlzLnBhZ2VMaXN0ID0gdGhpcy5saXN0LnNsaWNlKGJlZ2luLCBlbmQpO1xyXG4gICAgICAgIHBhZ2luYXRpb24uZHJhd0xpc3QoKTtcclxuICAgIH0sXHJcblxyXG4gICAgZHJhd0xpc3QoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5wYWdlTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBtYWtlUGFnaW5hdGlvbkxpc3QoKSB7XHJcbiAgICAgICAgbGV0IHBhZ2VDb25hdGluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy5udW1iZXJPZlBhZ2VzOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHBhZ2VOdW1iZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlTnVtYmVyLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhZ2VOdW1iZXIudGV4dENvbnRlbnQgPSBgJHtpfWA7XHJcbiAgICAgICAgICAgIHBhZ2VOdW1iZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjdXJyZW50UGFnZU51bWJlcik7XHJcbiAgICAgICAgICAgIHBhZ2VDb25hdGluZXIuYXBwZW5kQ2hpbGQocGFnZU51bWJlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbkxpc3QgPSBbLi4ucGFnZUNvbmF0aW5lci5jaGlsZHJlbl07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFnaW5hdGlvbkxpc3Q7XHJcbiAgICB9LFxyXG5cclxuICAgIHBhZ2luYXRpb25DdXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPD0gNikge1xyXG4gICAgICAgICAgICB0aGlzLnF0eVBhZ0xpc3QgPSB0aGlzLnBhZ2luYXRpb25MaXN0LnNsaWNlKDAsIDEwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFBhZ2UgPiA2ICYmIHRoaXMuY3VycmVudFBhZ2UgPCB0aGlzLnBhZ2luYXRpb25MaXN0Lmxlbmd0aCAtIDQpIHtcclxuICAgICAgICAgICAgdGhpcy5xdHlQYWdMaXN0ID0gdGhpcy5wYWdpbmF0aW9uTGlzdC5zbGljZSh0aGlzLmN1cnJlbnRQYWdlIC0gNiwgdGhpcy5jdXJyZW50UGFnZSArIDQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50UGFnZSA+PSB0aGlzLnBhZ2luYXRpb25MaXN0Lmxlbmd0aCAtIDQpIHtcclxuICAgICAgICAgICAgdGhpcy5xdHlQYWdMaXN0ID0gdGhpcy5wYWdpbmF0aW9uTGlzdC5zbGljZSgtMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYWdpbmF0aW9uLmRyYXdQYWdpbmF0aW9uKCk7XHJcbiAgICB9LFxyXG4gICAgZHJhd1BhZ2luYXRpb24oKSB7XHJcbiAgICAgICAgbGV0IHBhZ2luYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnaW5hdGlvbicpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdpbmF0aW9uJykuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgIGxldCBmaXJzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBsZXQgZmlyc3RJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgIGZpcnN0SWNvbi5jbGFzc05hbWUgPSAnZmFzIGZhLTF4IGZhLWFuZ2xlLWRvdWJsZS1sZWZ0JztcclxuICAgICAgICBmaXJzdC5hcHBlbmRDaGlsZChmaXJzdEljb24pO1xyXG4gICAgICAgIGZpcnN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZmlyc3RQYWdlKTtcclxuICAgICAgICBwYWdpbmF0aW9uLmFwcGVuZENoaWxkKGZpcnN0KTtcclxuXHJcbiAgICAgICAgbGV0IHByZXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGV0IHByZXZJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgIHByZXZJY29uLmNsYXNzTmFtZSA9ICdmYXMgZmEtMXggZmEtYW5nbGUtbGVmdCc7XHJcbiAgICAgICAgcHJldi5hcHBlbmRDaGlsZChwcmV2SWNvbik7XHJcbiAgICAgICAgcHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByZXZpb3VzUGFnZSk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5hcHBlbmRDaGlsZChwcmV2KTtcclxuXHJcbiAgICAgICAgbGV0IHBhZ2VDb25hdGluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblxyXG4gICAgICAgIHRoaXMucXR5UGFnTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBwYWdlQ29uYXRpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwYWdpbmF0aW9uLmFwcGVuZENoaWxkKHBhZ2VDb25hdGluZXIpO1xyXG5cclxuICAgICAgICBsZXQgbmV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBsZXQgbmV4dEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgbmV4dEljb24uY2xhc3NOYW1lID0gJ2ZhcyBmYS0xeCBmYS1hbmdsZS1yaWdodCc7XHJcbiAgICAgICAgbmV4dC5hcHBlbmRDaGlsZChuZXh0SWNvbik7XHJcbiAgICAgICAgbmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5leHRQYWdlKTtcclxuICAgICAgICBwYWdpbmF0aW9uLmFwcGVuZENoaWxkKG5leHQpO1xyXG5cclxuICAgICAgICBsZXQgbGFzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBsZXQgbGFzdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgbGFzdEljb24uY2xhc3NOYW1lID0gJ2ZhcyBmYS0xeCBmYS1hbmdsZS1kb3VibGUtcmlnaHQnO1xyXG4gICAgICAgIGxhc3QuYXBwZW5kQ2hpbGQobGFzdEljb24pO1xyXG4gICAgICAgIGxhc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsYXN0UGFnZSk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5hcHBlbmRDaGlsZChsYXN0KTtcclxuICAgIH0sXHJcblxyXG4gICAgdG9nZ2xlQ2xhc3MoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uTGlzdC5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50JykpO1xyXG4gICAgICAgIHRoaXMucXR5UGFnTGlzdC5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50JykpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbkxpc3RbdGhpcy5jdXJyZW50UGFnZSAtIDFdLmNsYXNzTmFtZSA9IFwiY3VycmVudFwiO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW1vdmUoKXtcclxuICAgICAgICBsZXQgcGFnaW5hdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdpbmF0aW9uJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2luYXRpb24nKS5pbm5lckhUTUwgPSAnJztcclxuICAgIH0sXHJcblxyXG4gICAgbG9hZEV2ZW50cygpIHtcclxuICAgICAgICBwYWdpbmF0aW9uLnBhZ2luYXRpb25DdXQoKTtcclxuICAgICAgICBwYWdpbmF0aW9uLnRvZ2dsZUNsYXNzKCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5sb2FkQ29udGVudExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBsb2FkKCkge1xyXG4gICAgICAgIHBhZ2luYXRpb24uZ2V0U2NyZWVuV2lkdGgoKTtcclxuICAgICAgICBwYWdpbmF0aW9uLm1ha2VDb250ZW50TGlzdCgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxO1xyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZQYWdlcyA9IHBhZ2luYXRpb24uZ2V0TnVtYmVyT2ZQYWdlcygpO1xyXG4gICAgICAgIHBhZ2luYXRpb24ubWFrZVBhZ2luYXRpb25MaXN0KCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5wYWdpbmF0aW9uQ3V0KCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5sb2FkQ29udGVudExpc3QoKTtcclxuXHJcbiAgICAgICAgcGFnaW5hdGlvbi5kcmF3TGlzdCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gY3VycmVudFBhZ2VOdW1iZXIoZXYpIHtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgcG9zaXRpb24gPSBwYXJzZUludChldi50YXJnZXQudGV4dCk7XHJcbiAgICBpZiAocG9zaXRpb24gIT09IHBhZ2luYXRpb24uY3VycmVudFBhZ2UpIHtcclxuICAgICAgICBwYWdpbmF0aW9uLmN1cnJlbnRQYWdlID0gcG9zaXRpb247XHJcbiAgICAgICAgcGFnaW5hdGlvbi5sb2FkRXZlbnRzKCk7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBuZXh0UGFnZShldikge1xyXG4gICAgaWYgKHBhZ2luYXRpb24uY3VycmVudFBhZ2UgIT09IHBhZ2luYXRpb24ubnVtYmVyT2ZQYWdlcykge1xyXG4gICAgICAgIHBhZ2luYXRpb24uY3VycmVudFBhZ2UgKz0gMTtcclxuICAgICAgICBwYWdpbmF0aW9uLmxvYWRFdmVudHMoKTtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KClcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcHJldmlvdXNQYWdlKGV2KSB7XHJcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHBhZ2luYXRpb24uY3VycmVudFBhZ2UgIT09IDEpIHtcclxuICAgICAgICBwYWdpbmF0aW9uLmN1cnJlbnRQYWdlIC09IDE7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5sb2FkRXZlbnRzKCk7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaXJzdFBhZ2UoZXYpIHtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAocGFnaW5hdGlvbi5jdXJyZW50UGFnZSAhPT0gMSkge1xyXG4gICAgICAgIHBhZ2luYXRpb24uY3VycmVudFBhZ2UgPSAxO1xyXG4gICAgICAgIHBhZ2luYXRpb24ubG9hZEV2ZW50cygpO1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbGFzdFBhZ2UoZXYpIHtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAocGFnaW5hdGlvbi5jdXJyZW50UGFnZSAhPT0gcGFnaW5hdGlvbi5udW1iZXJPZlBhZ2VzKSB7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5jdXJyZW50UGFnZSA9IHBhZ2luYXRpb24ubnVtYmVyT2ZQYWdlcztcclxuICAgICAgICBwYWdpbmF0aW9uLmxvYWRFdmVudHMoKTtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICB9XHJcbn1cclxuIl19
