(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.drawFiltration = drawFiltration;

var _pagination = require("./pagination");

function drawFiltration() {
  var drinks = document.getElementById('drinks');

  if (drinks) {
    var filtration = document.getElementById('filters');
    var catalogFilters = document.createElement('div');
    catalogFilters.className = 'product-filters';
    var productFilter = document.createElement('div');
    productFilter.className = 'product-filter';
    var filterLabel = document.createElement('label');
    filterLabel.setAttribute('for', 'filter');
    filterLabel.innerText = 'Фильтровать: ';
    var filterSelectBlock = document.createElement('select');
    filterSelectBlock.setAttribute('id', 'filter');
    filterSelectBlock.setAttribute('name', 'filterProducts');
    filterSelectBlock.addEventListener('change', makeFiltration);
    var allFilter = document.createElement('option');
    allFilter.setAttribute('value', 'all');
    allFilter.innerText = 'Все';
    filterSelectBlock.appendChild(allFilter);
    var waterFilter = document.createElement('option');
    waterFilter.setAttribute('value', 'water');
    waterFilter.innerText = 'Минеральная вода';
    filterSelectBlock.appendChild(waterFilter);
    var energyFilter = document.createElement('option');
    energyFilter.setAttribute('value', 'energy');
    energyFilter.innerText = 'Енергетики';
    filterSelectBlock.appendChild(energyFilter);
    var sweetFilter = document.createElement('option');
    sweetFilter.setAttribute('value', 'sweet');
    sweetFilter.innerText = 'Газировка вода';
    filterSelectBlock.appendChild(sweetFilter);
    var alcoholFilter = document.createElement('option');
    alcoholFilter.setAttribute('value', 'alcohol');
    alcoholFilter.innerText = 'Алкогольные напитки';
    filterSelectBlock.appendChild(alcoholFilter);
    productFilter.appendChild(filterLabel);
    productFilter.appendChild(filterSelectBlock);
    catalogFilters.appendChild(productFilter);
    filtration.appendChild(catalogFilters);
  }
}

function makeFiltration() {
  var value = document.getElementById('filter').value;
  var list = _pagination.pagination.list;

  if (value === 'all') {
    makeFullFiltration(list);

    _pagination.pagination.load();
  }

  if (value === 'water') {
    makeWaterFiltration(list);

    _pagination.pagination.remove();
  }

  if (value === 'energy') {
    makeEnergyFiltration(list);

    _pagination.pagination.remove();
  }

  if (value === 'sweet') {
    makeSweetFiltration(list);

    _pagination.pagination.remove();
  }

  if (value === 'alcohol') {
    makeAlcoholFiltration(list);

    _pagination.pagination.remove();
  }
}

function makeWaterFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'water') {
      item.style.display = 'none';
    }
  });
}

function makeFullFiltration(list) {
  list.forEach(function (item) {
    item.style.display = 'block';
  });
}

function makeEnergyFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'energy') {
      item.style.display = 'none';
    }
  });
}

function makeSweetFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'sweet') {
      item.style.display = 'none';
    }
  });
}

function makeAlcoholFiltration(list) {
  var container = document.getElementById('container');
  list.forEach(function (item) {
    container.appendChild(item);
    var type = item.getAttribute('prod-type');
    item.style.display = 'block';

    if (type !== 'alcohol') {
      item.style.display = 'none';
    }
  });
}

},{"./pagination":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pagination = void 0;

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

var pagination = {
  list: [],
  pageList: [],
  paginationList: [],
  qtyPagList: [],
  currentPage: 1,
  numberPerPage: 3,
  numberOfPages: 1,
  getScreenWidth: function getScreenWidth() {
    if (window.innerWidth <= 1080) {
      console.log(window.innerWidth);
      this.numberPerPage = 4;
    }
  },
  getNumberOfPages: function getNumberOfPages() {
    return Math.ceil(pagination.list.length / pagination.numberPerPage);
  },
  paginationCheck: function paginationCheck() {
    if (this.numberOfPages <= 1) {
      console.log('what?' + this.numberOfPages);
      pagination.remove();
    }
  },
  makeContentList: function makeContentList() {
    var itemsQty = document.getElementById('container');
    var items = itemsQty.children;
    this.list = _toConsumableArray(items);
    return this.list;
  },
  loadContentList: function loadContentList() {
    var begin = (this.currentPage - 1) * this.numberPerPage;
    var end = begin + this.numberPerPage;
    this.pageList = this.list.slice(begin, end);
    pagination.drawList();
  },
  drawList: function drawList() {
    document.getElementById('container').innerHTML = '';
    var container = document.getElementById('container');
    this.pageList.forEach(function (item) {
      container.appendChild(item);
    });
  },
  makePaginationList: function makePaginationList() {
    var pageConatiner = document.createElement('span');

    for (var i = 1; i <= this.numberOfPages; i++) {
      var pageNumber = document.createElement('a');

      if (i === 1) {
        pageNumber.classList.add('current');
      }

      pageNumber.textContent = "".concat(i);
      pageNumber.addEventListener('click', currentPageNumber);
      pageConatiner.appendChild(pageNumber);
    }

    this.paginationList = _toConsumableArray(pageConatiner.children);
    return this.paginationList;
  },
  paginationCut: function paginationCut() {
    if (this.currentPage <= 6) {
      this.qtyPagList = this.paginationList.slice(0, 10);
    } else if (this.currentPage > 6 && this.currentPage < this.paginationList.length - 4) {
      this.qtyPagList = this.paginationList.slice(this.currentPage - 6, this.currentPage + 4);
    } else if (this.currentPage >= this.paginationList.length - 4) {
      this.qtyPagList = this.paginationList.slice(-10);
    }

    pagination.drawPagination();
  },
  drawPagination: function drawPagination() {
    var pagination = document.getElementById('pagination');
    document.getElementById('pagination').innerHTML = '';
    var first = document.createElement('a');
    var firstIcon = document.createElement('i');
    firstIcon.className = 'fas fa-1x fa-angle-double-left';
    first.appendChild(firstIcon);
    first.addEventListener('click', firstPage);
    pagination.appendChild(first);
    var prev = document.createElement('a');
    var prevIcon = document.createElement('i');
    prevIcon.className = 'fas fa-1x fa-angle-left';
    prev.appendChild(prevIcon);
    prev.addEventListener('click', previousPage);
    pagination.appendChild(prev);
    var pageConatiner = document.createElement('span');
    this.qtyPagList.forEach(function (item) {
      pageConatiner.appendChild(item);
    });
    pagination.appendChild(pageConatiner);
    var next = document.createElement('a');
    var nextIcon = document.createElement('i');
    nextIcon.className = 'fas fa-1x fa-angle-right';
    next.appendChild(nextIcon);
    next.addEventListener('click', nextPage);
    pagination.appendChild(next);
    var last = document.createElement('a');
    var lastIcon = document.createElement('i');
    lastIcon.className = 'fas fa-1x fa-angle-double-right';
    last.appendChild(lastIcon);
    last.addEventListener('click', lastPage);
    pagination.appendChild(last);
  },
  toggleClass: function toggleClass() {
    this.paginationList.forEach(function (item) {
      return item.classList.remove('current');
    });
    this.qtyPagList.forEach(function (item) {
      return item.classList.remove('current');
    });

    if (this.currentPage) {
      this.paginationList[this.currentPage - 1].className = "current";
    }
  },
  remove: function remove() {
    var pagination = document.getElementById('pagination');
    document.getElementById('pagination').innerHTML = '';
  },
  loadEvents: function loadEvents() {
    pagination.paginationCut();
    pagination.toggleClass();
    pagination.loadContentList();
  },
  load: function load() {
    pagination.getScreenWidth();
    pagination.makeContentList();
    this.currentPage = 1;
    this.numberOfPages = pagination.getNumberOfPages();
    pagination.makePaginationList();
    pagination.paginationCut();
    pagination.loadContentList();
    pagination.drawList();
    pagination.paginationCheck();
  }
};
exports.pagination = pagination;

function currentPageNumber(ev) {
  ev.preventDefault();
  var position = parseInt(ev.target.text);

  if (position !== pagination.currentPage) {
    pagination.currentPage = position;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  }
}

function nextPage(ev) {
  if (pagination.currentPage !== pagination.numberOfPages) {
    pagination.currentPage += 1;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  } else {
    ev.preventDefault();
  }
}

function previousPage(ev) {
  ev.preventDefault();

  if (pagination.currentPage !== 1) {
    pagination.currentPage -= 1;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  } else {
    ev.preventDefault();
  }
}

function firstPage(ev) {
  ev.preventDefault();

  if (pagination.currentPage !== 1) {
    pagination.currentPage = 1;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  }
}

function lastPage(ev) {
  ev.preventDefault();

  if (pagination.currentPage !== pagination.numberOfPages) {
    pagination.currentPage = pagination.numberOfPages;
    pagination.loadEvents();
    window.scrollTo(0, 0);
  }
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZmlsdHJhdGlvbi5qcyIsInNyYy9qcy9wYWdpbmF0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztBQ0FBOztBQUVPLFNBQVMsY0FBVCxHQUEwQjtBQUU3QixNQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixRQUF4QixDQUFiOztBQUNBLE1BQUksTUFBSixFQUFZO0FBQ1IsUUFBSSxVQUFVLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBakI7QUFFQSxRQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2QixDQUFyQjtBQUNBLElBQUEsY0FBYyxDQUFDLFNBQWYsR0FBMkIsaUJBQTNCO0FBRUEsUUFBSSxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBcEI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxTQUFkLEdBQTBCLGdCQUExQjtBQUVBLFFBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQWxCO0FBQ0EsSUFBQSxXQUFXLENBQUMsWUFBWixDQUF5QixLQUF6QixFQUFnQyxRQUFoQztBQUNBLElBQUEsV0FBVyxDQUFDLFNBQVosR0FBd0IsZUFBeEI7QUFFQSxRQUFJLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQXhCO0FBQ0EsSUFBQSxpQkFBaUIsQ0FBQyxZQUFsQixDQUErQixJQUEvQixFQUFxQyxRQUFyQztBQUNBLElBQUEsaUJBQWlCLENBQUMsWUFBbEIsQ0FBK0IsTUFBL0IsRUFBdUMsZ0JBQXZDO0FBQ0EsSUFBQSxpQkFBaUIsQ0FBQyxnQkFBbEIsQ0FBbUMsUUFBbkMsRUFBNkMsY0FBN0M7QUFFQSxRQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQUFoQjtBQUNBLElBQUEsU0FB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LFdBQVgsR0FBeUIsVUFBVSxDQUFDLGFBQXBDO0FBQ0EsSUFBQSxVQUFVLENBQUMsVUFBWDtBQUNBLElBQUEsTUFBTSxDQUFDLFFBQVAsQ0FBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkI7QUFDSDtBQUNKIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHtwYWdpbmF0aW9ufSBmcm9tIFwiLi9wYWdpbmF0aW9uXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0ZpbHRyYXRpb24oKSB7XHJcblxyXG4gICAgbGV0IGRyaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcmlua3MnKTtcclxuICAgIGlmIChkcmlua3MpIHtcclxuICAgICAgICBsZXQgZmlsdHJhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJzJyk7XHJcblxyXG4gICAgICAgIGxldCBjYXRhbG9nRmlsdGVycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNhdGFsb2dGaWx0ZXJzLmNsYXNzTmFtZSA9ICdwcm9kdWN0LWZpbHRlcnMnO1xyXG5cclxuICAgICAgICBsZXQgcHJvZHVjdEZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHByb2R1Y3RGaWx0ZXIuY2xhc3NOYW1lID0gJ3Byb2R1Y3QtZmlsdGVyJztcclxuXHJcbiAgICAgICAgbGV0IGZpbHRlckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICBmaWx0ZXJMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdmaWx0ZXInKTtcclxuICAgICAgICBmaWx0ZXJMYWJlbC5pbm5lclRleHQgPSAn0KTQuNC70YzRgtGA0L7QstCw0YLRjDogJztcclxuXHJcbiAgICAgICAgbGV0IGZpbHRlclNlbGVjdEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgZmlsdGVyU2VsZWN0QmxvY2suc2V0QXR0cmlidXRlKCdpZCcsICdmaWx0ZXInKTtcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZmlsdGVyUHJvZHVjdHMnKTtcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBtYWtlRmlsdHJhdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBhbGxGaWx0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICBhbGxGaWx0ZXIuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdhbGwnKTtcclxuICAgICAgICBhbGxGaWx0ZXIuaW5uZXJUZXh0ID0gJ9CS0YHQtSc7XHJcbiAgICAgICAgZmlsdGVyU2VsZWN0QmxvY2suYXBwZW5kQ2hpbGQoYWxsRmlsdGVyKTtcclxuXHJcbiAgICAgICAgbGV0IHdhdGVyRmlsdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgd2F0ZXJGaWx0ZXIuc2V0QXR0cmlidXRlKCd2YWx1ZScsICd3YXRlcicpO1xyXG4gICAgICAgIHdhdGVyRmlsdGVyLmlubmVyVGV4dCA9ICfQnNC40L3QtdGA0LDQu9GM0L3QsNGPINCy0L7QtNCwJztcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5hcHBlbmRDaGlsZCh3YXRlckZpbHRlcik7XHJcblxyXG4gICAgICAgIGxldCBlbmVyZ3lGaWx0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICBlbmVyZ3lGaWx0ZXIuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdlbmVyZ3knKTtcclxuICAgICAgICBlbmVyZ3lGaWx0ZXIuaW5uZXJUZXh0ID0gJ9CV0L3QtdGA0LPQtdGC0LjQutC4JztcclxuICAgICAgICBmaWx0ZXJTZWxlY3RCbG9jay5hcHBlbmRDaGlsZChlbmVyZ3lGaWx0ZXIpO1xyXG5cclxuICAgICAgICBsZXQgc3dlZXRGaWx0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICBzd2VldEZpbHRlci5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJ3N3ZWV0Jyk7XHJcbiAgICAgICAgc3dlZXRGaWx0ZXIuaW5uZXJUZXh0ID0gJ9CT0LDQt9C40YDQvtCy0LrQsCDQstC+0LTQsCc7XHJcbiAgICAgICAgZmlsdGVyU2VsZWN0QmxvY2suYXBwZW5kQ2hpbGQoc3dlZXRGaWx0ZXIpO1xyXG5cclxuICAgICAgICBsZXQgYWxjb2hvbEZpbHRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGFsY29ob2xGaWx0ZXIuc2V0QXR0cmlidXRlKCd2YWx1ZScsICdhbGNvaG9sJyk7XHJcbiAgICAgICAgYWxjb2hvbEZpbHRlci5pbm5lclRleHQgPSAn0JDQu9C60L7Qs9C+0LvRjNC90YvQtSDQvdCw0L/QuNGC0LrQuCc7XHJcbiAgICAgICAgZmlsdGVyU2VsZWN0QmxvY2suYXBwZW5kQ2hpbGQoYWxjb2hvbEZpbHRlcik7XHJcblxyXG4gICAgICAgIHByb2R1Y3RGaWx0ZXIuYXBwZW5kQ2hpbGQoZmlsdGVyTGFiZWwpO1xyXG4gICAgICAgIHByb2R1Y3RGaWx0ZXIuYXBwZW5kQ2hpbGQoZmlsdGVyU2VsZWN0QmxvY2spO1xyXG5cclxuICAgICAgICBjYXRhbG9nRmlsdGVycy5hcHBlbmRDaGlsZChwcm9kdWN0RmlsdGVyKTtcclxuICAgICAgICBmaWx0cmF0aW9uLmFwcGVuZENoaWxkKGNhdGFsb2dGaWx0ZXJzKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUZpbHRyYXRpb24oKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyJykudmFsdWU7XHJcbiAgICBsZXQgbGlzdCA9IHBhZ2luYXRpb24ubGlzdDtcclxuXHJcbiAgICBpZiAodmFsdWUgPT09ICdhbGwnKSB7XHJcbiAgICAgICAgbWFrZUZ1bGxGaWx0cmF0aW9uKGxpc3QpO1xyXG4gICAgICAgIHBhZ2luYXRpb24ubG9hZCgpXHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUgPT09ICd3YXRlcicpIHtcclxuICAgICAgICBtYWtlV2F0ZXJGaWx0cmF0aW9uKGxpc3QpO1xyXG4gICAgICAgIHBhZ2luYXRpb24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUgPT09ICdlbmVyZ3knKSB7XHJcbiAgICAgICAgbWFrZUVuZXJneUZpbHRyYXRpb24obGlzdCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSA9PT0gJ3N3ZWV0Jykge1xyXG4gICAgICAgIG1ha2VTd2VldEZpbHRyYXRpb24obGlzdCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSA9PT0gJ2FsY29ob2wnKSB7XHJcbiAgICAgICAgbWFrZUFsY29ob2xGaWx0cmF0aW9uKGxpc3QpO1xyXG4gICAgICAgIHBhZ2luYXRpb24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VXYXRlckZpbHRyYXRpb24obGlzdCkge1xyXG4gICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKTtcclxuICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgbGV0IHR5cGUgPSBpdGVtLmdldEF0dHJpYnV0ZSgncHJvZC10eXBlJyk7XHJcbiAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBpZiAodHlwZSAhPT0gJ3dhdGVyJykge1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VGdWxsRmlsdHJhdGlvbihsaXN0KSB7XHJcbiAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRW5lcmd5RmlsdHJhdGlvbihsaXN0KSB7XHJcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xyXG4gICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICBsZXQgdHlwZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdwcm9kLXR5cGUnKTtcclxuICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGlmICh0eXBlICE9PSAnZW5lcmd5Jykge1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VTd2VldEZpbHRyYXRpb24obGlzdCkge1xyXG4gICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKTtcclxuICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgbGV0IHR5cGUgPSBpdGVtLmdldEF0dHJpYnV0ZSgncHJvZC10eXBlJyk7XHJcbiAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBpZiAodHlwZSAhPT0gJ3N3ZWV0Jykge1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VBbGNvaG9sRmlsdHJhdGlvbihsaXN0KSB7XHJcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xyXG4gICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICBsZXQgdHlwZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdwcm9kLXR5cGUnKTtcclxuICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGlmICh0eXBlICE9PSAnYWxjb2hvbCcpIHtcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59IiwiZXhwb3J0IGNvbnN0IHBhZ2luYXRpb24gPSB7XHJcbiAgICBsaXN0OiBbXSxcclxuICAgIHBhZ2VMaXN0OiBbXSxcclxuICAgIHBhZ2luYXRpb25MaXN0OiBbXSxcclxuICAgIHF0eVBhZ0xpc3Q6IFtdLFxyXG4gICAgY3VycmVudFBhZ2U6IDEsXHJcbiAgICBudW1iZXJQZXJQYWdlOiAzLFxyXG4gICAgbnVtYmVyT2ZQYWdlczogMSxcclxuXHJcbiAgICBnZXRTY3JlZW5XaWR0aCgpIHtcclxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gMTA4MCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cuaW5uZXJXaWR0aCk7XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVyUGVyUGFnZSA9IDQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgZ2V0TnVtYmVyT2ZQYWdlcygpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHBhZ2luYXRpb24ubGlzdC5sZW5ndGggLyBwYWdpbmF0aW9uLm51bWJlclBlclBhZ2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICBwYWdpbmF0aW9uQ2hlY2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubnVtYmVyT2ZQYWdlcyA8PSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aGF0PycgKyB0aGlzLm51bWJlck9mUGFnZXMpXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb24ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBtYWtlQ29udGVudExpc3QoKSB7XHJcbiAgICAgICAgbGV0IGl0ZW1zUXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xyXG4gICAgICAgIGxldCBpdGVtcyA9IGl0ZW1zUXR5LmNoaWxkcmVuO1xyXG4gICAgICAgIHRoaXMubGlzdCA9IFsuLi5pdGVtc107XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdDtcclxuICAgIH0sXHJcblxyXG4gICAgbG9hZENvbnRlbnRMaXN0KCkge1xyXG4gICAgICAgIGxldCBiZWdpbiA9ICgodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5udW1iZXJQZXJQYWdlKTtcclxuICAgICAgICBsZXQgZW5kID0gYmVnaW4gKyB0aGlzLm51bWJlclBlclBhZ2U7XHJcbiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IHRoaXMubGlzdC5zbGljZShiZWdpbiwgZW5kKTtcclxuICAgICAgICBwYWdpbmF0aW9uLmRyYXdMaXN0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGRyYXdMaXN0KCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMucGFnZUxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgbWFrZVBhZ2luYXRpb25MaXN0KCkge1xyXG4gICAgICAgIGxldCBwYWdlQ29uYXRpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMubnVtYmVyT2ZQYWdlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBwYWdlTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcGFnZU51bWJlci5jbGFzc0xpc3QuYWRkKCdjdXJyZW50JylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYWdlTnVtYmVyLnRleHRDb250ZW50ID0gYCR7aX1gO1xyXG4gICAgICAgICAgICBwYWdlTnVtYmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3VycmVudFBhZ2VOdW1iZXIpO1xyXG4gICAgICAgICAgICBwYWdlQ29uYXRpbmVyLmFwcGVuZENoaWxkKHBhZ2VOdW1iZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25MaXN0ID0gWy4uLnBhZ2VDb25hdGluZXIuY2hpbGRyZW5dO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhZ2luYXRpb25MaXN0O1xyXG4gICAgfSxcclxuXHJcbiAgICBwYWdpbmF0aW9uQ3V0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlIDw9IDYpIHtcclxuICAgICAgICAgICAgdGhpcy5xdHlQYWdMaXN0ID0gdGhpcy5wYWdpbmF0aW9uTGlzdC5zbGljZSgwLCAxMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRQYWdlID4gNiAmJiB0aGlzLmN1cnJlbnRQYWdlIDwgdGhpcy5wYWdpbmF0aW9uTGlzdC5sZW5ndGggLSA0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucXR5UGFnTGlzdCA9IHRoaXMucGFnaW5hdGlvbkxpc3Quc2xpY2UodGhpcy5jdXJyZW50UGFnZSAtIDYsIHRoaXMuY3VycmVudFBhZ2UgKyA0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFBhZ2UgPj0gdGhpcy5wYWdpbmF0aW9uTGlzdC5sZW5ndGggLSA0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucXR5UGFnTGlzdCA9IHRoaXMucGFnaW5hdGlvbkxpc3Quc2xpY2UoLTEwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFnaW5hdGlvbi5kcmF3UGFnaW5hdGlvbigpO1xyXG4gICAgfSxcclxuICAgIGRyYXdQYWdpbmF0aW9uKCkge1xyXG4gICAgICAgIGxldCBwYWdpbmF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2luYXRpb24nKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnaW5hdGlvbicpLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICBsZXQgZmlyc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGV0IGZpcnN0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICBmaXJzdEljb24uY2xhc3NOYW1lID0gJ2ZhcyBmYS0xeCBmYS1hbmdsZS1kb3VibGUtbGVmdCc7XHJcbiAgICAgICAgZmlyc3QuYXBwZW5kQ2hpbGQoZmlyc3RJY29uKTtcclxuICAgICAgICBmaXJzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZpcnN0UGFnZSk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5hcHBlbmRDaGlsZChmaXJzdCk7XHJcblxyXG4gICAgICAgIGxldCBwcmV2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGxldCBwcmV2SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICBwcmV2SWNvbi5jbGFzc05hbWUgPSAnZmFzIGZhLTF4IGZhLWFuZ2xlLWxlZnQnO1xyXG4gICAgICAgIHByZXYuYXBwZW5kQ2hpbGQocHJldkljb24pO1xyXG4gICAgICAgIHByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmV2aW91c1BhZ2UpO1xyXG4gICAgICAgIHBhZ2luYXRpb24uYXBwZW5kQ2hpbGQocHJldik7XHJcblxyXG4gICAgICAgIGxldCBwYWdlQ29uYXRpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cclxuICAgICAgICB0aGlzLnF0eVBhZ0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgcGFnZUNvbmF0aW5lci5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFnaW5hdGlvbi5hcHBlbmRDaGlsZChwYWdlQ29uYXRpbmVyKTtcclxuXHJcbiAgICAgICAgbGV0IG5leHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGV0IG5leHRJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgIG5leHRJY29uLmNsYXNzTmFtZSA9ICdmYXMgZmEtMXggZmEtYW5nbGUtcmlnaHQnO1xyXG4gICAgICAgIG5leHQuYXBwZW5kQ2hpbGQobmV4dEljb24pO1xyXG4gICAgICAgIG5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuZXh0UGFnZSk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5hcHBlbmRDaGlsZChuZXh0KTtcclxuXHJcbiAgICAgICAgbGV0IGxhc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGV0IGxhc3RJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgIGxhc3RJY29uLmNsYXNzTmFtZSA9ICdmYXMgZmEtMXggZmEtYW5nbGUtZG91YmxlLXJpZ2h0JztcclxuICAgICAgICBsYXN0LmFwcGVuZENoaWxkKGxhc3RJY29uKTtcclxuICAgICAgICBsYXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGFzdFBhZ2UpO1xyXG4gICAgICAgIHBhZ2luYXRpb24uYXBwZW5kQ2hpbGQobGFzdCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHRvZ2dsZUNsYXNzKCkge1xyXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbkxpc3QuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpKTtcclxuICAgICAgICB0aGlzLnF0eVBhZ0xpc3QuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpKTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25MaXN0W3RoaXMuY3VycmVudFBhZ2UgLSAxXS5jbGFzc05hbWUgPSBcImN1cnJlbnRcIjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlKCkge1xyXG4gICAgICAgIGxldCBwYWdpbmF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2luYXRpb24nKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnaW5hdGlvbicpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb2FkRXZlbnRzKCkge1xyXG4gICAgICAgIHBhZ2luYXRpb24ucGFnaW5hdGlvbkN1dCgpO1xyXG4gICAgICAgIHBhZ2luYXRpb24udG9nZ2xlQ2xhc3MoKTtcclxuICAgICAgICBwYWdpbmF0aW9uLmxvYWRDb250ZW50TGlzdCgpO1xyXG4gICAgfSxcclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5nZXRTY3JlZW5XaWR0aCgpO1xyXG4gICAgICAgIHBhZ2luYXRpb24ubWFrZUNvbnRlbnRMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZlBhZ2VzID0gcGFnaW5hdGlvbi5nZXROdW1iZXJPZlBhZ2VzKCk7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5tYWtlUGFnaW5hdGlvbkxpc3QoKTtcclxuICAgICAgICBwYWdpbmF0aW9uLnBhZ2luYXRpb25DdXQoKTtcclxuICAgICAgICBwYWdpbmF0aW9uLmxvYWRDb250ZW50TGlzdCgpO1xyXG4gICAgICAgIHBhZ2luYXRpb24uZHJhd0xpc3QoKTtcclxuICAgICAgICBwYWdpbmF0aW9uLnBhZ2luYXRpb25DaGVjaygpXHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjdXJyZW50UGFnZU51bWJlcihldikge1xyXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBwb3NpdGlvbiA9IHBhcnNlSW50KGV2LnRhcmdldC50ZXh0KTtcclxuICAgIGlmIChwb3NpdGlvbiAhPT0gcGFnaW5hdGlvbi5jdXJyZW50UGFnZSkge1xyXG4gICAgICAgIHBhZ2luYXRpb24uY3VycmVudFBhZ2UgPSBwb3NpdGlvbjtcclxuICAgICAgICBwYWdpbmF0aW9uLmxvYWRFdmVudHMoKTtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5leHRQYWdlKGV2KSB7XHJcbiAgICBpZiAocGFnaW5hdGlvbi5jdXJyZW50UGFnZSAhPT0gcGFnaW5hdGlvbi5udW1iZXJPZlBhZ2VzKSB7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5jdXJyZW50UGFnZSArPSAxO1xyXG4gICAgICAgIHBhZ2luYXRpb24ubG9hZEV2ZW50cygpO1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwcmV2aW91c1BhZ2UoZXYpIHtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAocGFnaW5hdGlvbi5jdXJyZW50UGFnZSAhPT0gMSkge1xyXG4gICAgICAgIHBhZ2luYXRpb24uY3VycmVudFBhZ2UgLT0gMTtcclxuICAgICAgICBwYWdpbmF0aW9uLmxvYWRFdmVudHMoKTtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpcnN0UGFnZShldikge1xyXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChwYWdpbmF0aW9uLmN1cnJlbnRQYWdlICE9PSAxKSB7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5jdXJyZW50UGFnZSA9IDE7XHJcbiAgICAgICAgcGFnaW5hdGlvbi5sb2FkRXZlbnRzKCk7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsYXN0UGFnZShldikge1xyXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChwYWdpbmF0aW9uLmN1cnJlbnRQYWdlICE9PSBwYWdpbmF0aW9uLm51bWJlck9mUGFnZXMpIHtcclxuICAgICAgICBwYWdpbmF0aW9uLmN1cnJlbnRQYWdlID0gcGFnaW5hdGlvbi5udW1iZXJPZlBhZ2VzO1xyXG4gICAgICAgIHBhZ2luYXRpb24ubG9hZEV2ZW50cygpO1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgIH1cclxufVxyXG4iXX0=
